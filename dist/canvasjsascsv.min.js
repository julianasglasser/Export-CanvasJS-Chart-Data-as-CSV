function CanvasJSDataAsCSV(b,d){var a=document.getElementsByClassName("canvasjs-chart-toolbar")[0];if(b.options.exportEnabled){var c=document.createElement("div"),e=document.createTextNode("Save as CSV");c.setAttribute("style","padding: 12px 8px; background-color: white; color: black");c.appendChild(e);c.addEventListener("mouseover",function(){c.setAttribute("style","padding: 12px 8px; background-color: #2196F3; color: white")});c.addEventListener("mouseout",function(){c.setAttribute("style","padding: 12px 8px; background-color: white; color: black")});
c.addEventListener("click",function(){parseCSV({filename:(d||"chart-data")+".csv",chart:b})});a.lastChild.appendChild(c)}else a=document.createElement("button"),a.style.cssText="position:relative;display: inline-block;padding: 0px 4px;height: 27px;cursor: pointer;text-align: center;text-decoration: none;background-color: #fff;border: 1px solid rgb(33, 150, 243);left:"+(b.container.clientWidth-(b.options.zoomEnabled?115:60))+"px; top: 1px",e=document.createElement("IMG"),e.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEgSURBVEhL3dM/SgNBFMfxBS8gWkYb0dJSyBGCwdIzRPAKgrZKINdIkVJB0qqteIdYCYoHEPX74P1gMszuzG5SiD/4wM6/99jJpvq3GeIVPwUu0ToLpIrVad1EB3Pp3KRLA1PcRAdyCYtLURNtziUsHMqmeGOUxnNtPs2cZNp+mk2S0eIteu7O5y5wgFN8Yw8vePZnnZVktLiDJzxi1+cOfe4GHxhhgjHOoLOSTLgYbjZz7OPaxzOc4Nif4/3JaNHe4MHpDc7xiW284R1b2IS9ka61MWpg925NrPi9z9mfx65pgC+fO0Lfn21/Nqt8RUo8XordZ9cmSjyuTfHGKH+nQe6qptiA5QqpPcbWkin5PXJNaot3Tdhk7cUVKxwUr6pfwprgQh4A9MYAAAAASUVORK5CYII="),
a.appendChild(e),a.addEventListener("mouseover",function(){this.style.cssText+="background-color: rgb(33, 150, 243)"}),a.addEventListener("mouseout",function(){this.style.cssText+="background-color: #fff;"}),a.addEventListener("click",function(){parseCSV({filename:(d||"chart-data")+".csv",chart:b})}),b.container.appendChild(a)}
function convertChartDataToCSV(b){var d;var a=b.data||null;if(null==a||!a.length)return null;var c=b.columnDelimiter||",";var e=b.lineDelimiter||"\n";var g=Object.keys(a[0]);var f="";f+=g.join(c);f+=e;a.forEach(function(a){d=0;g.forEach(function(b){0<d&&(f+=c);f+="undefined"!==typeof a[b]&&null!==a[b]?a[b]:"";d++});f+=e});return f}
function parseCSV(b){for(var d="",a=0;a<b.chart.options.data.length;a++)d+=convertChartDataToCSV({data:b.chart.options.data[a].dataPoints});null!=d&&(b=b.filename||"chart-data.csv",d.match(/^data:text\/csv/i)||(d="data:text/csv;charset=utf-8,"+d),downloadFile(d,b))}function downloadFile(b,d){var a=encodeURI(b),c=document.createElement("a");c.setAttribute("href",a);c.setAttribute("download",d);document.body.appendChild(c);c.click();document.body.removeChild(c)};
