function exportAsCSV(a,c){var b=document.getElementsByClassName("canvasjs-chart-toolbar")[0];if(a.options.exportEnabled){var d=document.createElement("div"),e=document.createTextNode("Save as CSV");d.setAttribute("style","padding: 12px 8px; background-color: white; color: black");d.appendChild(e);d.addEventListener("mouseover",function(){d.setAttribute("style","padding: 12px 8px; background-color: #2196F3; color: white")});d.addEventListener("mouseout",function(){d.setAttribute("style","padding: 12px 8px; background-color: white; color: black")});
d.addEventListener("click",function(){downloadCSV({filename:(c||"chart-data")+".csv",chart:a})});b.childNodes[1].appendChild(d)}else d=document.createElement("button"),e=document.createTextNode("Save as CSV"),d.appendChild(e),d.addEventListener("click",function(){downloadCSV({filename:"chart-data.csv",chart:a})}),a.container.parentNode.insertBefore(d,a.container.nextSibling)}
function convertChartDataToCSV(a){var c;var b=a.data||null;if(null==b||!b.length)return null;var d=a.columnDelimiter||",";var e=a.lineDelimiter||"\n";var g=Object.keys(b[0]);var f="";f+=g.join(d);f+=e;b.forEach(function(a){c=0;g.forEach(function(b){0<c&&(f+=d);f+="undefined"!==typeof a[b]&&null!==a[b]?a[b]:"";c++});f+=e});return f}
function downloadCSV(a){var c;var b="";for(c=0;c<a.chart.options.data.length;c++)b+=convertChartDataToCSV({data:a.chart.options.data[c].dataPoints});null!=b&&(a=a.filename||"chart-data.csv",b.match(/^data:text\/csv/i)||(b="data:text/csv;charset=utf-8,"+b),b=encodeURI(b),c=document.createElement("a"),c.setAttribute("href",b),c.setAttribute("download",a),document.body.appendChild(c),c.click(),document.body.removeChild(c))};